(()=>{"use strict";function e(e,t){for(let n in t)e.setAttribute(n,t[n])}function t(e,t){const n=document.createElement(e);return n.classList.add(...t.split(" ")),n}const n="function"==typeof BigInt?BigInt:Number,i=e=>e<=Number.MAX_SAFE_INTEGER?Number(e):n(e);function r(e,t){if(e<0)throw new RangeError("negative n is not acceptable");if(t<0)throw new RangeError("negative k is not acceptable");if(0==t)return 1;if(e<t)return 0;[e,t]=[n(e),n(t)];let r=n(1);for(;t--;)r*=e--;return i(r)}function s(e){return r(e,e)}const l="undefined"!=typeof crypto?crypto:{},o="function"==typeof l.randomBytes?e=>Uint8Array.from(l.randomBytes(e)):"function"==typeof l.getRandomValues?e=>l.getRandomValues(new Uint8Array(e)):e=>Uint8Array.from(Array(e),(()=>256*Math.random()));class c{static of(...e){return new(Function.prototype.bind.apply(this,[null].concat(e)))}static from(e){return new(Function.prototype.bind.apply(this,[null].concat(e)))}[Symbol.iterator](){return function*(e,t){for(let n=0;n<t;n++)yield e.nth(n)}(this,this.length)}toArray(){return[...this]}get isBig(){return Number.MAX_SAFE_INTEGER<this.length}get isSafe(){return"undefined"!=typeof BigInt||!this.isBig}_check(e){if(e<0){if(this.length<-e)return;return i(n(this.length)+n(e))}if(!(this.length<=e))return e}nth(e){return[]}sample(){return this.nth(function(e=0,t=Math.pow(2,53)){let n=e.constructor;if(0===arguments.length)return Math.floor(Math.random()*n(t));if(1==arguments.length&&([e,t]=[n(0),e]),"number"==typeof e)return[e,t]=[Math.ceil(Number(e)),Math.ceil(Number(t))],Math.floor(Math.random()*(t-e))+e;const i=n(t)-n(e),r=i.toString(16).length,s=o(r).reduce(((e,t)=>(e<<n(8))+n(t)),n(0));return(n(s)*i>>n(8*r))+n(e)}(this.length))}samples(){return function*(e){for(;;)yield e.sample()}(this)}}class a extends c{constructor(e,t=0){super(),this.seed=[...e],this.size=0<t?t:this.seed.length,this.length=r(this.seed.length,this.size),Object.freeze(this)}nth(e){if(void 0===(e=this._check(e)))return;const t=this.seed.length-this.size,i=s(t);let r=function(e,t=0){if(e<0)return;let[i,r]=[n(e),n(1)];if(t)r=n(s(t));else{for(t=1;r<i;r*=n(++t));i<r&&(r/=n(t--))}let l=[0];for(;t;r/=n(t--))l[t]=Math.floor(Number(i/r)),i%=r;return l}(n(e)*n(i),this.seed.length),l=this.seed.slice(),o=[];for(let e=this.seed.length-1;t<=e;e--)o.push(l.splice(r[e],1)[0]);return o}}let d,u,h;fetch("./data/anointmentsAmulets.json").then((e=>e.json())).then((e=>d=JSON.parse(e))),fetch("./data/anointmentsRings.json").then((e=>e.json())).then((e=>u=JSON.parse(e))),fetch("./data/anointmentsMaps.json").then((e=>e.json())).then((e=>h=JSON.parse(e)));const m=(()=>{const e=t("div","section expand-section-wrap");return function(){const t=document.getElementsByClassName("expand-section-wrap")[0];t&&t.remove(),document.getElementById("main").append(e.cloneNode(!0))}})();function p({target:e}){const n=new Map;let i=0;if(Array.from(document.getElementsByClassName("oil-input-wrap")).forEach((({children:[{innerText:e},{value:t}]})=>{if(+t){const r=Math.abs(t)>=3?3:+t;n.set(e.split(" ")[0],r),i+=r}})),!function(e){const t=document.getElementsByClassName("error-wrap")[0],n=[...document.querySelectorAll(".checkbox")].filter((({checked:e})=>e))[0].id.match(/[0-9]/)[0];return e<n?(t.innerText=`Enter at least ${n} oil${n>1?"s":""}!`,t.classList.remove("hide"),!1):(t.classList.add("hide"),!0)}(i))return;e.disabled=!0,m();const r=[];n.forEach(((e,t)=>{for(let n=e;n>0;n--)r.push(t)}));const s={perm3Check:["Amulets and Blight uniques anointments",{className:"amulet-unique-table",unpackedJSON:d,permutation:null}],perm2Check:["Rings anointments",{className:"rings-table",unpackedJSON:u,permutation:null}],perm1Check:["Maps anointments",{className:"Maps-table",unpackedJSON:h,permutation:null}]};document.querySelectorAll(".checkbox").forEach((({checked:n,id:i})=>{if(n){const n=i.match(/[0-9]/)[0];new Promise((e=>setTimeout((()=>e(new Set([...new a(r,n)].map((e=>e.join("")))))),0))).then((e=>{s[i][1].permutation=e,function(e,n){const i=t("a","toggle");i.innerText=e;const r=t("span","arrow");r.innerText="▼";const s=t("span","arrow hide");s.innerText="▲",i.append(r,s),i.addEventListener("click",(function({target:e}){const{children:[t,n]}=e;t.classList.toggle("hide"),n.classList.toggle("hide"),e.nextElementSibling.classList.toggle("hide")}));const l=t("div","toggle-content hide");l.append(function({className:e,permutation:n,unpackedJSON:i}){const r=t("table","anoint-table"),s=r.createTHead().insertRow();for(let e=1;e<4;e++)s.insertCell().innerText=`Oil #${e}`;"amulet-unique-table"===e&&(s.insertCell().innerText="Skill name"),s.insertCell().innerText="Description";const l=r.createTBody();return n.forEach((e=>{if(Object.prototype.hasOwnProperty.call(i,e)){const{oil1:t,oil2:n,oil3:s,name:o="",description:c}=i[e],a=l.insertRow();r.rows.length%2==0&&a.classList.add("table-row-even"),a.insertCell().innerText=t,a.lastElementChild.classList.add("table-cell-oil"),a.insertCell().innerText=n,a.lastElementChild.classList.add("table-cell-oil"),a.insertCell().innerText=s,a.lastElementChild.classList.add("table-cell-oil"),o&&(a.insertCell().innerText=o,a.lastElementChild.classList.add("table-cell-name")),a.insertCell().innerText=c,a.lastElementChild.classList.add("table-cell-description")}})),r}(n)),document.getElementsByClassName("expand-section-wrap")[0].append(i,l)}(...s[i])})).then((()=>e.disabled=!1))}}))}!function(){const n=document.createElement("main");n.setAttribute("id","main"),n.append(function(){const n=t("div","section oil-input-container"),i=t("div","oil-input-wrap"),r=t("p","oil-name"),s=t("input","oil-number-input");return e(s,{type:"number",value:0,min:0}),i.append(r,s),["Clear Oil","Sepia Oil","Amber Oil","Verdant Oil","Teal Oil","Azure Oil","Indigo Oil","Violet Oil","Crimson Oil","Black Oil","Opalescent Oil","Silver Oil","Golden Oil"].forEach((e=>{const t=i.cloneNode(!0);t.firstElementChild.innerText=e,n.append(t)})),n}(),function(){const n=(()=>{const n=t("input","checkbox");e(n,{type:"checkbox",checked:!1});const i=document.createElement("label"),r=t("div","checkbox-group");return r.append(n,i),function({id:e,checked:t,innerText:n}){const i=r.cloneNode(!0);return i.firstElementChild.setAttribute("id",e),i.firstElementChild.checked=t,i.lastElementChild.innerText=n,i}})(),i=t("div","section checkbox-wrap");return i.append(n({id:"perm3Check",checked:!0,innerText:"Show Amulets and Blight uniques anointments"})),i.append(n({id:"perm2Check",checked:!1,innerText:"Show Ring anointments"})),i.append(n({id:"perm1Check",checked:!1,innerText:"Show Maps anointments"})),i.addEventListener("click",(function(e){e.target.matches(".checkbox")&&(document.getElementById("btn-calculate").disabled=![...document.querySelectorAll(".checkbox")].reduce(((e,{checked:t})=>e+t),0))})),i}(),function(){const e=document.createElement("button");return e.setAttribute("id","btn-calculate"),e.innerText="Calculate",e.addEventListener("click",p,!1),e}(),t("div","section error-wrap"),function(){const e=t("button","hide");return e.setAttribute("id","btn-scroll-up"),e.innerText="▲",document.addEventListener("scroll",(()=>window.scrollY>500?e.classList.remove("hide"):e.classList.add("hide"))),e.addEventListener("click",(()=>document.body.scrollIntoView({behavior:"smooth"}))),e}()),document.body.append(n)}()})();